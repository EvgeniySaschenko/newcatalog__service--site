import{d as f,u,k as m,e as L,m as $,l as h,a as y,r as x,c as S,h as c,b as N,o as w,j as b}from"./entry.6045a6ed.js";import{u as B}from"./index.a5fe6611.js";import{A as I}from"./app-ratings-list.1c338b66.js";import R from"./app-preloader.53237d3f.js";import A from"./app-title.c402673f.js";import"./app-label-rating.04de97b0.js";async function l(){let{$api:t}=u(),{params:e,query:i}=m();return await t.getPageSection({sectionId:Number(e.sectionId),page:Number(i.page)||1})}const k=f({async asyncData(){let t,e,{$t:i,$langDefault:n}=u(),{params:r}=m(),s=([t,e]=L(()=>l()),t=await t,e(),t);s!=null&&s.isError&&s.showError();let o=$().items.filter(_=>_.sectionId==r.sectionId),a="";o[0].name&&(a=`${o[0].name[n()]}`),h().setBreadcrumbs([{name:a,url:`/${n()}/section/${r.sectionId}`}]);let{pageTitlePrefix:g,pageTitleSufix:d}=y().items;return B({title:`${g} ${i("Section")}: ${a} ${d}`.trim()}),{ratingsList:s,sectionName:a,isLoading:!1}},data(){return{ratingsList:[],sectionName:"",isLoading:!0}},watch:{$route:{async handler(t,e){if(t.path!==e.path){this.isLoading=!0;return}t.query.page!==e.query.page&&await this.setRatingsList()}}},methods:{async setRatingsList(){this.isLoading=!0;try{this.ratingsList=await l()}catch(t){console.error(t),this.ratingsList=[]}finally{this.isLoading=!1}}},components:{AppRatingsList:I}}),q={class:"page page--section"},v={class:"page__ratings-list"};function E(t,e,i,n,r,s){const p=R,o=A,a=x("app-ratings-list");return w(),S("div",q,[c(p,{isLoading:t.isLoading,position:"fixed"},null,8,["isLoading"]),c(o,{text:`${t.$t("Section")}: ${t.sectionName}`},null,8,["text"]),N("div",v,[c(a,{ratingsList:t.ratingsList},null,8,["ratingsList"])])])}const M=b(k,[["render",E]]);export{M as default};
