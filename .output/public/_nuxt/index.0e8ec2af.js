import{d as g,u as p,e as _,l as m,a as d,k as f,r as h,c as L,h as r,b as x,o as y,j as $}from"./entry.2b266255.js";import{u as w}from"./index.8caf1ea8.js";import{A as R}from"./app-ratings-list.3d2e24ff.js";import A from"./app-preloader.0d715855.js";import B from"./app-title.b89db5a4.js";import"./app-label-rating.42e23f11.js";async function o(){let{$api:t}=p(),{query:e}=f();return await t.getPageRatingsAll({page:Number(e.page)||1})}const E=g({async asyncData(){let t,e,{$t:a}=p(),s=([t,e]=_(()=>o()),t=await t,e(),t);if(s!=null&&s.isError)return s.showError();m().setBreadcrumbs([]);let{pageTitlePrefix:n,pageTitleSufix:i}=d().items;return w({title:`${n} ${a("#Title main page")} ${i}`.trim()}),{ratingsList:s,isLoading:!1}},data(){return{ratingsList:[],isLoading:!0}},watch:{$route:{async handler(t,e){if(t.path!==e.path){this.isLoading=!0;return}t.query.page!==e.query.page&&await this.setRatingsList()}}},methods:{async setRatingsList(){this.isLoading=!0;try{let t=await o();if(t!=null&&t.isError)return t.showError();this.ratingsList=t}catch(t){console.error(t),this.ratingsList=[]}finally{this.isLoading=!1}}},components:{AppRatingsList:R}}),N={class:"page page--section"},S={class:"page__ratings-list"};function b(t,e,a,s,l,n){const i=A,c=B,u=h("app-ratings-list");return y(),L("div",N,[r(i,{isLoading:t.isLoading,position:"fixed"},null,8,["isLoading"]),r(c,{text:t.$t("#Title main page")},null,8,["text"]),x("div",S,[r(u,{ratingsList:t.ratingsList},null,8,["ratingsList"])])])}const V=$(E,[["render",b]]);export{V as default};
